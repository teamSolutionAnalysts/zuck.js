"use strict";!function(e){var t=function(e){return document.querySelectorAll(e)[0]},a=function(e,t){return e&&e[t]||""},n=function(e,t){if(e)for(var a=e.length,n=0;n<a;n++)t(n,e[n])},i=function(e,t,a){var i=[t.toLowerCase(),"webkit".concat(t),"MS".concat(t),"o".concat(t)];n(i,function(t,n){e[n]=a})},o=function(e,t,a){var i=[a.toLowerCase(),"webkit".concat(a),"MS".concat(a),"o".concat(a)];n(i,function(a,n){e.addEventListener(n,t,!1)})},r=function(e,t){o(e,t,"AnimationEnd")},s=function(e,t){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},c=function(c,l){var u=this,m=function(e,t){var a=function(e){return void 0!==e};return t?a(l[e])&&a(l[e][t])?l[e][t]:h[e][t]:a(l[e])?l[e]:h[e]},v=function(e,t){var a="RequestFullScreen";try{t?(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)&&(document.exitFullscreen?document.exitFullscreen().catch(function(){}):document.mozCancelFullScreen?document.mozCancelFullScreen().catch(function(){}):document.mozCancelFullScreen&&document.mozCancelFullScreen().catch(function(){})):e.requestFullScreen?e.requestFullScreen():e["ms".concat(a)]?e["ms".concat(a)]():e["moz".concat(a)]?e["moz".concat(a)]():e["webkit".concat(a)]&&e["webkit".concat(a)]()}catch(e){console.warn("[Zuck.js] Can't access fullscreen")}},f=function(e,a,n,o){var r=a>0?1:-1,s=Math.abs(a)/t("#zuck-modal").offsetWidth*90*r;if(m("cubeEffect")){var c=0===s?"scale(0.95)":"scale(0.930,0.930)";if(i(t("#zuck-modal-content").style,"Transform",c),s<-90||s>90)return!1}var d=m("cubeEffect")?"rotateY(".concat(s,"deg)"):"translate3d(".concat(a,"px, 0, 0)");e&&(i(e.style,"TransitionTimingFunction",o),i(e.style,"TransitionDuration","".concat(n,"ms")),i(e.style,"Transform",d))},p=function(e,t,a,n){var i=0,o=0;if(e){if(e.offsetParent)do{if(i+=e.offsetLeft,o+=e.offsetTop,e===n)break}while(e=e.offsetParent);t&&(o-=t),a&&(i-=a)}return[i,o]};"string"==typeof c&&(c=document.getElementById(c)),c.id||c.setAttribute("id","stories-"+Math.random().toString(36).substr(2,9));var g=function(e){e=1e3*Number(e);var t=new Date(e),a=t.getTime(),n=((new Date).getTime()-a)/1e3,i=m("language","time"),o=[[60," ".concat(i.seconds),1],[120,"1 ".concat(i.minute),""],[3600," ".concat(i.minutes),60],[7200,"1 ".concat(i.hour),""],[86400," ".concat(i.hours),3600],[172800," ".concat(i.yesterday),""],[604800," ".concat(i.days),86400]],r=1;n<0&&(n=Math.abs(n),r=2);for(var s=0,c=void 0;c=o[s++];)if(n<c[0])return"string"==typeof c[2]?c[r]:Math.floor(n/c[2])+c[1];var d=t.getDate(),l=t.getMonth(),u=t.getFullYear();return"".concat(d,"/").concat(l+1,"/").concat(u)},y=c.id,h={skin:"snapgram",avatars:!0,stories:[],backButton:!0,backNative:!1,paginationArrows:!1,previousTap:!0,autoFullScreen:!1,openEffect:!0,cubeEffect:!1,list:!1,localStorage:!0,callbacks:{onOpen:function(e,t){t()},onView:function(e){},onEnd:function(e,t){t()},onClose:function(e,t){t()},onNextItem:function(e,t,a){a()},onNavigateItem:function(e,t,a){a()},onUserInputSubmit:function(){callback()}},template:{timelineItem:e=>`<div class="story moment-wraper ${!0===a(e,"seen")?"seen":""}">\n          <div class="user-moment-wraper">\n            <a class="item-link d-flex align-items-center" href="${a(e,"link")}">\n              ${a(e,"photo")?`\n              <div class="item-preview user-images">\n                <img lazy="eager" src="${m("avatars")||!a(e,"currentPreview")?a(e,"photo"):a(e,"currentPreview")}" />\n              </div>\n              `:`\n              <div class="user-dp-img item-preview ${a(e,"colorGradient")}">\n                <label>${a(e,"name").charAt(0).toLowerCase()}</label>\n              </div>\n              `}\n              <div class="info user-moment-detail" itemProp="author" itemScope itemType="http://schema.org/Person">\n                <div class="name user-name" itemProp="name">${a(e,"name")}</div>\n                <div class="time user-date">${d(a(e,"lastUpdated"))}</div>\n              </div>\n            </a>\n          </div>\n          <ul class="items"></ul>\n        </div>`,timelineStoryItem:e=>`<a href="${a(e,"src")}"\n                      data-link="${a(e,"link")}"\n                      data-linkText="${a(e,"linkText")}"\n                      data-text="${a(e,"text")}"\n                      data-time="${a(e,"time")}"\n                      data-type="${a(e,"type")}"\n                      data-length="${a(e,"length")}">\n                    <img loading="auto" src="${a(e,"preview")}" />\n                  </a>`,viewerItem:(e,t)=>`<div class="story-viewer">\n                    <div class="head">\n                      <div class="left">\n                        ${m("backButton")?'<a class="back">&lsaquo;</a>':""}\n                        ${a(e,"photo")?`\n                            <div class="item-preview user-images">\n                               <img lazy="eager" src="${m("avatars")||!a(e,"currentPreview")?a(e,"photo"):a(e,"currentPreview")}" />\n                        \n                            </div>\n                            `:` \n                            <div class="user-dp-img ${a(e,"colorGradient")}">\n                               <label>${a(e,"name").charAt(0).toLowerCase()}</label>\n                            </div>\n                            `}\n\n                        <div class="info">\n                          <strong class="name">${a(e,"name")}</strong>\n                          <span class="time">${a(e,"timeAgo")}</span>\n                        </div>\n                      </div>\n                      \n                      <div class="right">\n                        <span class="time">${a(t,"timeAgo")}</span>\n                        <span class="loading"></span>\n                        <img src="assets/images/cancel-white.svg" tabIndex="2" class="hovera close" style="height:60px;width:40px;z-index: 9999999;">\n                      </div>\n\n                    </div>\n\n                    <div class="slides-pointers">\n                      <div class="wrap"></div>\n                    </div>\n\n                    ${m("paginationArrows")?'<div class="slides-pagination">\n                          <span class="previous">&lsaquo;</span>\n                          <span class="next">&rsaquo;</span>\n                        </div>':""}\n                  </div>`,viewerItemPointer:(e,t,n)=>`<span \n                    class="${t===e?"active":""} ${!0===a(n,"seen")?"seen":""}"\n                    data-index="${e}" data-item-id="${a(n,"id")}">\n                      <b style="animation-duration:${""===a(n,"length")?"5":a(n,"length")}s"></b>\n                  </span>`,viewerItemBody:(e,t,n)=>`\n                  <div \n                    class="item ${!0===a(n,"seen")?"seen":""} ${t===e?"active":""}"\n                    data-time="${a(n,"time")}" data-type="${a(n,"type")}" data-index="${e}" data-item-id="${a(n,"id")}">\n                    ${"video"===a(n,"type")?`<video class="media" muted webkit-playsinline playsinline preload="auto" src="${a(n,"src")}" ${a(n,"type")}></video>\n                        <b class="tip muted">${m("language","unmute")}</b>`:""}\n                    ${"image"===a(n,"type")?`<img loading="auto" class="media" src="${a(n,"src")}" ${a(n,"type")} />`:""}\n                    ${"text"===a(n,"type")?`<div class="text-moment-bg">\n                        <div class="text-moment-status-txt">\n                        <p style="color:white" class="text-moment">${a(n,"text")} </p>                        \n                        </div>\n                        </div>`:""}\n                    ${a(n,"link")?`<a class="tip link" href="${a(n,"link")}" rel="noopener" target="_blank">\n                            ${a(n,"linkText")&&""!==a(n,"linkText")?a(n,"linkText"):m("language","visitLink")}\n                          </a>`:""}\n                    <div class="moment-reply">\n                      <div class="moment-reply-wraper">\n                        <input type="text" placeholder="Enter Reply.." class="user-input"> \n                        <img src="assets/images/img_chat_send.svg" id="replyMomentSubmit">\n                      </div>                        \n                    </div>\n                  </div>\n                  `},language:{unmute:"Touch to unmute",keyboardTip:"Press space to see next",visitLink:"Visit link",time:{ago:"ago",hour:"hour ago",hours:"hours ago",minute:"minute ago",minutes:"minutes ago",fromnow:"from now",seconds:"seconds ago",yesterday:"yesterday",tomorrow:"tomorrow",days:"days ago"}}},b=function(){var i,c,d=t("#zuck-modal");if(!d&&!u.hasModal){u.hasModal=!0,(d=document.createElement("div")).id="zuck-modal",m("cubeEffect")&&(d.className="with-cube"),d.innerHTML='<div id="zuck-modal-content"></div>',d.style.display="none",d.setAttribute("tabIndex","1");const e=function(e){const a=t("#zuck-modal .viewing .item.active .user-input");if(""!==a.value.trim()){var n=t("#zuck-modal .viewing"),i=n.querySelector(".item.active").getAttribute("data-index");const e=u.data.filter(e=>e.id==n.getAttribute("data-story-id"))[0];e&&i>=0&&m("callbacks","onUserInputSubmit")(n.getAttribute("data-story-id"),e.items[i].id,a.value),a.value="",u.startItem()}};d.onmousedown=function(t){"replyMomentSubmit"==t.target.getAttribute("id")&&e(t)},d.onkeyup=function(t){var a=t.keyCode;t.target.classList.value.indexOf("user-input")>-1&&""!==t.target.value.trim()?13===a&&e(t):27===a?b.close():13!==a&&32!==a||b.next()},m("openEffect")&&d.classList.add("with-effects"),c=function(){d.classList.contains("closed")&&(l.innerHTML="",d.style.display="none",d.classList.remove("closed"),d.classList.remove("animated"))},(i=d).transitionEndEvent||(i.transitionEndEvent=!0,o(i,c,"TransitionEnd")),document.body.appendChild(d)}var l=t("#zuck-modal-content"),h=function(e){var a=t("#zuck-modal"),n="",i="",o=0,s=t("#zuck-modal-slider-".concat(y)),c={previous:t("#zuck-modal .story-viewer.previous"),next:t("#zuck-modal .story-viewer.next"),viewing:t("#zuck-modal .story-viewer.viewing")};if(!c.previous&&!e||!c.next&&e)return!1;e?(n="next",i="previous"):(n="previous",i="next"),m("cubeEffect")?"previous"===n?o=a.slideWidth:"next"===n&&(o=-1*a.slideWidth):o=-1*p(c[n])[0],f(s,o,600,null),setTimeout(function(){if(""!==n&&c[n]&&""!==i){var e=c[n].getAttribute("data-story-id");u.internalData.currentStory=e;var a=t("#zuck-modal .story-viewer.".concat(i));a&&a.parentNode.removeChild(a),c.viewing&&(c.viewing.classList.add("stopped"),c.viewing.classList.add(i),c.viewing.classList.remove("viewing")),c[n]&&(c[n].classList.remove("stopped"),c[n].classList.remove(n),c[n].classList.add("viewing"));var o=k(n);o&&w(o,n);var d=u.internalData.currentStory,l=t('#zuck-modal [data-story-id="'.concat(d,'"]'));if(l){var v=(l=l.querySelectorAll("[data-index].active"))[0].firstElementChild;u.data[d].currentItem=parseInt(l[0].getAttribute("data-index"),10),l[0].innerHTML='<b style="'.concat(v.style.cssText,'"></b>'),r(l[0].firstElementChild,function(){u.nextItem(!1)})}if(f(s,"0",0,null),l){var p=t('#zuck-modal .story-viewer[data-story-id="'.concat(e,'"]'));L(p,[l[0],l[1]],!0)}u.sendViewItemUpdate(),m("callbacks","onView")(u.internalData.currentStory)}},650)},w=function(e,i,o){var c=t("#zuck-modal-slider-".concat(y)),d=a(e,"items");e.timeAgo=d&&d[0]?g(a(d[0],"time")):"";var l="",v="",f=a(e,"id"),p=document.createElement("div"),h=a(e,"currentItem")||0,w=t('#zuck-modal .story-viewer[data-story-id="'.concat(f,'"]'));if(w)return!1;p.className="slides",n(d,function(t,n){n.timeAgo=g(a(n,"time")),h>t&&(e.items[t].timeAgo=n.timeAgo,e.items[t].seen=!0,n.seen=!0),h===t&&n.timeAgo,v+=m("template","viewerItemPointer")(t,h,n),l+=m("template","viewerItemBody")(t,h,n)}),p.innerHTML=l;var k=p.querySelector("video"),x=function(e){e.muted?I.classList.add("muted"):I.classList.remove("muted")};k&&(k.onwaiting=function(e){k.paused&&(I.classList.add("paused"),I.classList.add("loading"))},k.onplay=function(){x(k),I.classList.remove("stopped"),I.classList.remove("paused"),I.classList.remove("loading")},k.onload=k.onplaying=k.oncanplay=function(){x(k),I.classList.remove("loading")},k.onvolumechange=function(){x(k)});var A=document.createElement("div");A.innerHTML=m("template","viewerItem")(e,h);var I=A.firstElementChild;I.className="story-viewer muted ".concat(i," ").concat(o?"":"stopped"," ").concat(m("backButton")?"with-back-button":""),I.setAttribute("data-story-id",f),I.querySelector(".slides-pointers .wrap").innerHTML=v,n(I.querySelectorAll(".close, .back"),function(e,t){t.onclick=function(e){e.preventDefault(),b.close()}}),I.appendChild(p),"viewing"===i&&L(I,I.querySelectorAll('[data-index="'.concat(h,'"].active')),!1),n(I.querySelectorAll(".slides-pointers [data-index] > b"),function(e,t){r(t,function(){u.nextItem(!1)})}),"previous"===i?s(c,I):c.appendChild(I)},E=function(){document.querySelectorAll(".user-input").forEach(e=>{var t=function(){u.stopItem()};e.removeEventListener("click",t),e.addEventListener("click",t)})};return{show:function(a,n){var i=t("#zuck-modal");m("callbacks","onOpen")(a,function(){l.innerHTML='<div id="zuck-modal-slider-'.concat(y,'" class="slider"></div>');var n=u.data[a],o=n.currentItem||0;!function(a){var n=t("#zuck-modal"),i=a,o={},r=void 0,s=void 0,c=void 0,d=void 0,l=void 0,v=function(e){var a=t("#zuck-modal .viewing");if("A"!==e.target.nodeName){var u=e.touches?e.touches[0]:e,m=p(t("#zuck-modal .story-viewer.viewing"));n.slideWidth=t("#zuck-modal .story-viewer").offsetWidth,n.slideHeight=t("#zuck-modal .story-viewer").offsetHeight,o={x:m[0],y:m[1]};var v=u.pageX,f=u.pageY;r={x:v,y:f,time:Date.now(),valid:!0},f<80||f>n.slideHeight-80?r.valid=!1:(e.preventDefault(),s=void 0,c={},i.addEventListener("mousemove",g),i.addEventListener("mouseup",y),i.addEventListener("mouseleave",y),i.addEventListener("touchmove",g),i.addEventListener("touchend",y),a&&a.classList.add("paused"),A(),d=setTimeout(function(){a.classList.add("longPress")},600),l=setTimeout(function(){clearInterval(l),l=!1},250))}},g=function(e){var t=e.touches?e.touches[0]:e,a=t.pageX,n=t.pageY;r&&r.valid&&(c={x:a-r.x,y:n-r.y},void 0===s&&(s=!!(s||Math.abs(c.x)<Math.abs(c.y))),!s&&r&&(e.preventDefault(),f(i,o.x+c.x,0,null)))},y=function a(v){var p=t("#zuck-modal .viewing"),y=r;if(!r||r.valid){if(c){var b=r?Date.now()-r.time:void 0,w=Number(b)<300&&Math.abs(c.x)>25||Math.abs(c.x)>n.slideWidth/3,k=c.x<0,x=t(k?"#zuck-modal .story-viewer.next":"#zuck-modal .story-viewer.previous");s||(!w||k&&!x||!k&&!x?f(i,o.x,300):h(k)),r=void 0,i.removeEventListener("mousemove",g),i.removeEventListener("mouseup",a),i.removeEventListener("mouseleave",a),i.removeEventListener("touchmove",g),i.removeEventListener("touchend",a)}var A=u.internalData.currentVideoElement;if(d&&clearInterval(d),p&&(L(p,p.querySelectorAll(".active"),!1),p.classList.remove("longPress"),p.classList.remove("paused")),l){clearInterval(l),l=!1;var S=function(){y.x>e.screen.width/3||!m("previousTap")?u.navigateItem("next",v):u.navigateItem("previous",v)},E=t("#zuck-modal .viewing");if(!E||!A)return S(),!1;E.classList.contains("muted")?I(A,E):S()}}};i.addEventListener("touchstart",v),i.addEventListener("mousedown",v)}(t("#zuck-modal-slider-".concat(y))),u.internalData.currentStory=a,n.currentItem=o,m("backNative")&&(e.location.hash="#!".concat(y));var r=k("previous");r&&w(r,"previous"),w(n,"viewing",!0);var s=k("next");s&&w(s,"next"),m("autoFullScreen")&&i.classList.add("fullscreen");var c=function(){i.classList.contains("fullscreen")&&m("autoFullScreen")&&e.screen.width<=1024&&v(i),i.focus()};if(m("openEffect")){var d=t("#".concat(y,' [data-id="').concat(a,'"] .item-preview')),g=p(d);i.style.marginLeft="".concat(g[0]+d.offsetWidth/2,"px"),i.style.marginTop="".concat(g[1]+d.offsetHeight/2,"px"),i.style.display="block",i.slideWidth=t("#zuck-modal .story-viewer").offsetWidth,setTimeout(function(){i.classList.add("animated")},10),setTimeout(function(){c()},300)}else i.style.display="block",i.slideWidth=t("#zuck-modal .story-viewer").offsetWidth,c();m("callbacks","onView")(a),E()})},next:function(e){m("callbacks","onEnd")(u.internalData.currentStory,function(){var e=u.internalData.currentStory,a=t("#".concat(y,' [data-id="').concat(e,'"]'));a&&(a.classList.add("seen"),u.data[e].seen=!0,u.internalData.seenItems[e]=!0,S("seenItems",u.internalData.seenItems),x()),t("#zuck-modal .story-viewer.next")?(E(),h(!0)):b.close()})},close:function(){var a=t("#zuck-modal");m("callbacks","onClose")(u.internalData.currentStory,function(){m("backNative")&&(e.location.hash=""),v(a,!0),m("openEffect")?a.classList.add("closed"):(l.innerHTML="",a.style.display="none")})}}}(),w=function(e,t){var a=e.getAttribute("data-id"),n=!1;u.internalData.seenItems[a]&&(n=!0);try{u.data[a]||(u.data[a]={}),u.data[a].id=a,u.data[a].photo=e.getAttribute("data-photo"),u.data[a].name=e.querySelector(".name").innerText,u.data[a].link=e.querySelector(".item-link").getAttribute("href"),u.data[a].lastUpdated=e.getAttribute("data-last-updated"),u.data[a].seen=n,u.data[a].colorGradient=e.getAttribute("data-colorGradient"),u.data[a].items||(u.data[a].items=[],u.data[a].noItems=!0)}catch(e){u.data[a]={items:[]}}e.onclick=function(e){e.preventDefault(),b.show(a),setTimeout(()=>{u.sendViewItemUpdate()},300)};var i=m("callbacks","onDataUpdate");i&&i(u.data,function(){})},k=function(e){var a=u.internalData.currentStory,n="".concat(e,"ElementSibling");if(a){var i=t("#".concat(y,' [data-id="').concat(a,'"]'))[n];if(i){var o=i.getAttribute("data-id");return u.data[o]||!1}}return!1},x=function(){n(document.querySelectorAll("#".concat(y," .story.seen")),function(e,t){var a=u.data[t.getAttribute("data-id")],n=t.parentNode;m("reactive")||n.removeChild(t),u.update(a,!0)})},L=function(e,t,a){var n=t[1],o=t[0];if(!n||!o)return!1;var r=u.internalData.currentVideoElement;if(r&&r.pause(),"video"===n.getAttribute("data-type")){var s=n.getElementsByTagName("video")[0];if(!s)return u.internalData.currentVideoElement=!1,!1;var c=function(){s.duration&&i(o.getElementsByTagName("b")[0].style,"AnimationDuration","".concat(s.duration,"s"))};c(),s.addEventListener("loadedmetadata",c),u.internalData.currentVideoElement=s,s.play(),a&&a.target&&I(s,e)}else u.internalData.currentVideoElement=!1},A=function(){var e=u.internalData.currentVideoElement;if(e)try{e.pause()}catch(e){}},I=function(e,t){e.muted=!1,e.volume=1,e.removeAttribute("muted"),e.play(),e.paused&&(e.muted=!0,e.play()),t&&t.classList.remove("paused")},S=function(t,a){try{if(m("localStorage")){var n="zuck-".concat(y,"-").concat(t);e.localStorage[n]=JSON.stringify(a)}}catch(e){}},E=function(t){if(m("localStorage")){var a="zuck-".concat(y,"-").concat(t);return!!e.localStorage[a]&&JSON.parse(e.localStorage[a])}return!1};u.data=m("stories")||{},u.internalData={},u.internalData.seenItems=E("seenItems")||{},u.add=u.update=function(e,i){var o=a(e,"id"),r=t("#".concat(y,' [data-id="').concat(o,'"]')),d=a(e,"items"),l=void 0,v=!1;if(d[0]&&(v=d[0].preview||""),!0===u.internalData.seenItems[o]&&(e.seen=!0),e.currentPreview=v,r)l=r;else{var f=document.createElement("div");f.innerHTML=m("template","timelineItem")(e),l=f.firstElementChild}!1===e.seen&&(u.internalData.seenItems[o]=!1,S("seenItems",u.internalData.seenItems)),l.setAttribute("data-id",o),l.setAttribute("data-photo",a(e,"photo")),l.setAttribute("data-last-updated",a(e,"lastUpdated")),l.setAttribute("data-colorGradient",a(e,"colorGradient")),w(l),r||m("reactive")||(i?c.appendChild(l):s(c,l)),n(d,function(e,t){u.addItem(o,t,i)}),i||x()},u.next=function(){b.next()},u.remove=function(e){var a=t("#".concat(y,' > [data-id="').concat(e,'"]'));a.parentNode.removeChild(a)},u.addItem=function(e,i,o){var r=t("#".concat(y,' > [data-id="').concat(e,'"]'));if(!m("reactive")){var c=document.createElement("li"),d=r.querySelectorAll(".items")[0];c.className=a(i,"seen")?"seen":"",c.setAttribute("data-id",a(i,"id")),c.innerHTML=m("template","timelineStoryItem")(i),o?d.appendChild(c):s(d,c)}!function(e,t){var a=e.getAttribute("data-id"),i=document.querySelectorAll("#".concat(y,' [data-id="').concat(a,'"] .items > li')),o=[];if(!m("reactive")||t){n(i,function(e,t){var a=t.firstElementChild,n=a.firstElementChild;o.push({id:a.getAttribute("data-id"),src:a.getAttribute("href"),length:a.getAttribute("data-length"),type:a.getAttribute("data-type"),time:a.getAttribute("data-time"),link:a.getAttribute("data-link"),linkText:a.getAttribute("data-linkText"),text:a.getAttribute("data-text"),preview:n.getAttribute("src")})}),u.data[a].items=o;var r=m("callbacks","onDataUpdate");r&&r(u.data,function(){})}}(r)},u.removeItem=function(e,a){var n=t("#".concat(y,' > [data-id="').concat(e,'"] [data-id="').concat(a,'"]'));m("reactive")||c.parentNode.removeChild(n)},u.stopItem=function(){var e=t("#zuck-modal .viewing");e&&(e.classList.add("paused"),A())},u.sendViewItemUpdate=function(){var e=t("#zuck-modal .viewing"),a=e.querySelector(".item.active").getAttribute("data-index");const n=u.data.filter(t=>t.id==e.getAttribute("data-story-id"))[0];n&&a>=0&&m("callbacks","onUserViewComplete")(e.getAttribute("data-story-id"),n.items[a].id)},u.startItem=function(){var e=t("#zuck-modal .viewing");if(e){e.classList.remove("paused");var a=u.internalData.currentVideoElement;a&&I(a,e)}},u.navigateItem=u.nextItem=function(e,a){var i=u.internalData.currentStory,o=u.data[i].currentItem,r=t('#zuck-modal .story-viewer[data-story-id="'.concat(i,'"]')),s="previous"===e?-1:1;if(!r||1===r.touchMove)return!1;var c=r.querySelectorAll('[data-index="'.concat(o,'"]')),d=c[0],l=c[1],v=o+s,f=r.querySelectorAll('[data-index="'.concat(v,'"]')),p=f[0],y=f[1];if(r&&p&&y){var h=m("callbacks","onNavigateItem");(h=m("callbacks",h?"onNavigateItem":"onNextItem"))(i,y.getAttribute("data-story-id"),function(){"previous"===e?(d.classList.remove("seen"),l.classList.remove("seen")):(d.classList.add("seen"),l.classList.add("seen")),d.classList.remove("active"),l.classList.remove("active"),p.classList.remove("seen"),p.classList.add("active"),y.classList.remove("seen"),y.classList.add("active"),n(r.querySelectorAll(".time"),function(e,t){t.innerText=g(y.getAttribute("data-time"))}),u.data[i].currentItem=u.data[i].currentItem+s,L(r,f,a),u.sendViewItemUpdate()})}else r&&"previous"!==e&&b.next(a)};return function(){if(c&&c.querySelector(".story")&&n(c.querySelectorAll(".story"),function(e,t){w(t)}),m("backNative")&&(e.location.hash==="#!".concat(y)&&(e.location.hash=""),e.addEventListener("popstate",function(t){e.location.hash!=="#!".concat(y)&&(e.location.hash="")},!1)),!m("reactive")){var t=E("seenItems");for(var a in t)t.hasOwnProperty(a)&&u.data[a]&&(u.data[a].seen=t[a])}n(m("stories"),function(e,t){u.add(t,!0)}),x();var i=m("avatars")?"user-icon":"story-preview",o=m("list")?"list":"carousel";return c.className+=" stories ".concat(i," ").concat(o," ").concat("".concat(m("skin")).toLowerCase()),u}()};c.buildTimelineItem=function(e,t,a,i,o,r,s){var d={id:e,photo:t,name:a,link:i,lastUpdated:o,items:[],colorGradient:s};return n(r,function(e,t){d.items.push(c.buildStoryItem.apply(c,t))}),d};const d=function(e){const t=[["second",1],["minute",60],["hour",3600],["day",86400],["week",604800],["month",2592e3],["year",31536e3]],a=new Date;for(var n=Math.round((a-new Date(e))/1e3),i=0;i<t.length;i++)if(n<t[i][1])return 0==i?"Just now":(n=Math.round(n/t[i-1][1]))+" "+t[i-1][0]+(1==n?" ago":"s ago")};c.buildItem=c.buildStoryItem=function(e,t,a,n,i,o,r,s,c,d){return{id:e,type:t,length:a,src:n,preview:i,link:o,linkText:r,seen:s,time:c,text:d}},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.ZuckJS=c):e.ZuckitaDaGalera=e.Zuck=c}(window||{});